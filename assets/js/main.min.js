const prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches;function initFeatherIcons(){if(!document.querySelectorAll("[data-feather]").length)return;const e=function(){window.feather&&"function"==typeof window.feather.replace&&window.feather.replace()};if(window.feather)return void e();let t=!1;const n=function(){if(t)return;t=!0;const n=document.querySelector('script[src$="main.min.js"], script[src$="main.js"]'),o=document.createElement("script");o.src=n&&n.src?new URL("feather.min.js",n.src).toString():"assets/js/feather.min.js",o.defer=!0,o.onload=e,document.head.appendChild(o)};"requestIdleCallback"in window?requestIdleCallback(n,{timeout:1200}):setTimeout(n,800),["touchstart","pointerdown","keydown","mousemove"].forEach(function(e){window.addEventListener(e,n,{once:!0,passive:!0})})}function openWhatsApp(e){const t=`https://wa.me/5215510881676?text=${encodeURIComponent(e||"Hola, me interesa conocer más sobre sus productos termoformados")}`;window.open(t,"_blank")}function showNotification(e,t="success",n=5e3){const o=document.createElement("div");o.className=`notification notification-${t}`,o.style.cssText=`\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 1rem 1.5rem;\n    background-color: ${"success"===t?"var(--color-success)":"var(--color-error)"};\n    color: white;\n    border-radius: var(--border-radius);\n    box-shadow: var(--box-shadow-hover);\n    z-index: 10000;\n    animation: slideInRight 0.3s ease-out;\n  `,o.textContent=e,document.body.appendChild(o),setTimeout(function(){o.style.animation="slideOutRight 0.3s ease-out",setTimeout(function(){o.remove()},300)},n)}document.addEventListener("DOMContentLoaded",function(){initFeatherIcons();const e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-close"),n=document.querySelector(".nav-menu"),o=document.querySelectorAll(".nav-link"),r=function(e){if(!n)return;const t=!!(window.innerWidth<768)&&!e;n.setAttribute("aria-hidden",t?"true":"false"),"inert"in n?n.inert=t:t?n.setAttribute("inert",""):n.removeAttribute("inert");n.querySelectorAll("a, button, input, select, textarea, [tabindex]").forEach(function(e){t?(e.hasAttribute("tabindex")&&(e.dataset.prevTabindex=e.getAttribute("tabindex")),e.setAttribute("tabindex","-1")):void 0!==e.dataset.prevTabindex?(e.setAttribute("tabindex",e.dataset.prevTabindex),delete e.dataset.prevTabindex):e.removeAttribute("tabindex")})},a=function(t){n&&(n.classList.toggle("active",t),document.documentElement.style.overflow=t?"hidden":"",document.body.style.overflow=t?"hidden":"",e&&e.setAttribute("aria-expanded",t?"true":"false"),r(t))};e&&e.addEventListener("click",function(){a(!0)}),t&&t.addEventListener("click",function(){a(!1)}),o.forEach(function(e){e.addEventListener("click",function(){window.innerWidth<768&&a(!1)})}),document.addEventListener("click",function(t){if(!n||!n.classList.contains("active"))return;const o=n.contains(t.target),r=e&&e.contains(t.target);o||r||a(!1)});const s=window.location.pathname;o.forEach(function(e){(e.getAttribute("href")===s||"/"===s&&"index.html"===e.getAttribute("href")||s.includes(e.getAttribute("href"))&&"index.html"!==e.getAttribute("href"))&&e.classList.add("active")}),n&&(r(n.classList.contains("active")),window.addEventListener("resize",function(){r(n.classList.contains("active"))}));document.querySelectorAll("form").forEach(function(e){e.addEventListener("submit",function(t){let n=!0;e.querySelectorAll("[required]").forEach(function(e){if(e.value.trim()){e.style.borderColor="";const t=e.parentElement.querySelector(".error-message");t&&t.remove()}else{n=!1,e.style.borderColor="var(--color-error)";let t=e.parentElement.querySelector(".error-message");t||(t=document.createElement("span"),t.className="error-message",t.style.color="var(--color-error)",t.style.fontSize="var(--font-size-small)",t.style.marginTop="var(--spacing-xs)",t.style.display="block",t.textContent="Este campo es obligatorio",e.parentElement.appendChild(t))}});e.querySelectorAll('input[type="email"]').forEach(function(e){if(e.value&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)){n=!1,e.style.borderColor="var(--color-error)";let t=e.parentElement.querySelector(".error-message");t||(t=document.createElement("span"),t.className="error-message",t.style.color="var(--color-error)",t.style.fontSize="var(--font-size-small)",t.style.marginTop="var(--spacing-xs)",t.style.display="block",t.textContent="Por favor ingrese un email válido",e.parentElement.appendChild(t))}});if(e.querySelectorAll('input[type="tel"]').forEach(function(e){if(e.value&&!/^[\d\s\-\+\(\)]{10,}$/.test(e.value)){n=!1,e.style.borderColor="var(--color-error)";let t=e.parentElement.querySelector(".error-message");t||(t=document.createElement("span"),t.className="error-message",t.style.color="var(--color-error)",t.style.fontSize="var(--font-size-small)",t.style.marginTop="var(--spacing-xs)",t.style.display="block",t.textContent="Por favor ingrese un teléfono válido (mínimo 10 dígitos)",e.parentElement.appendChild(t))}}),!n){t.preventDefault();const n=e.querySelector('[style*="border-color"]');return void(n&&n.scrollIntoView({behavior:"smooth",block:"center"}))}if(e.action&&e.action.includes("formspree.io")){t.preventDefault();const n=e.querySelector('button[type="submit"]'),o=n.textContent;n.textContent="Enviando...",n.disabled=!0,fetch(e.action,{method:"POST",body:new FormData(e),headers:{Accept:"application/json"}}).then(function(t){if(t.ok){e.classList.contains("newsletter-form")?(showNotification("Gracias por suscribirte.","success",5e3),e.innerHTML='<div style="text-align:center; padding: var(--spacing-xl) 0;"><h3 style="color: var(--color-primary); margin-bottom: var(--spacing-md);">¡Gracias por suscribirte!</h3><p>Te enviaremos novedades y tips directamente a tu correo.</p></div>'):(showNotification("Solicitud enviada. Te responderemos en menos de 24 horas.","success",5e3),e.innerHTML='<div style="text-align:center; padding: var(--spacing-xl) 0;"><h3 style="color: var(--color-primary); margin-bottom: var(--spacing-md);">¡Mensaje enviado!</h3><p>Gracias por tu interés. Te responderemos en menos de 24 horas.</p></div>')}else n.textContent=o,n.disabled=!1,alert("Hubo un error al enviar el formulario. Por favor intenta de nuevo o contáctanos por WhatsApp.")}).catch(function(){n.textContent=o,n.disabled=!1,alert("Error de conexión. Por favor intenta de nuevo o contáctanos por WhatsApp.")})}});e.querySelectorAll("input, textarea, select").forEach(function(e){e.addEventListener("input",function(){this.style.borderColor="";const e=this.parentElement.querySelector(".error-message");e&&e.remove()})})});document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"===t)return;const n=document.querySelector(t);n&&(e.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}))})});const i=document.querySelectorAll("img[data-src]"),c=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.removeAttribute("data-src"),t.unobserve(n)}})});i.forEach(function(e){c.observe(e)});const l=document.querySelectorAll(".animate-on-scroll");if(prefersReducedMotion||!("IntersectionObserver"in window))l.forEach(function(e){e.classList.add("visible")});else{const e=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("visible")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});l.forEach(function(t){e.observe(t)})}const d=document.querySelector(".back-to-top"),u=document.querySelector(".header"),f=function(e){if(d){const t=e>300;(d.dataset.visible||"false")!==String(t)&&(d.dataset.visible=t?"true":"false",d.style.display=t?"flex":"none")}if(u){const t=e>100;(u.dataset.elevated||"false")!==String(t)&&(u.dataset.elevated=t?"true":"false",u.style.boxShadow=t?"0 4px 12px rgba(0, 0, 0, 0.15)":"var(--box-shadow)")}};let m=!1;const p=function(){m||(m=!0,requestAnimationFrame(function(){f(window.pageYOffset||window.scrollY||0),m=!1}))};if(d&&d.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),(d||u)&&(window.addEventListener("scroll",p,{passive:!0}),f(window.pageYOffset||window.scrollY||0)),!document.querySelector(".floating-whatsapp")){const e=document.createElement("a");e.className="floating-whatsapp btn-whatsapp",e.href="https://wa.me/5215510881676",e.target="_blank",e.rel="noopener",e.setAttribute("aria-label","Contactar por WhatsApp"),e.dataset.message="Hola, me interesa una cotización para productos termoformados.",e.innerHTML='\n      <span class="floating-whatsapp-icon" aria-hidden="true">\n        <svg viewBox="0 0 32 32" width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M16 3C9.37 3 4 8.24 4 14.7c0 2.22.67 4.29 1.82 6.02L4 29l8.46-1.7c1 .33 2.1.5 3.54.5 6.63 0 12-5.24 12-11.7C28 8.24 22.63 3 16 3Zm0 21.1c-1.02 0-2.02-.2-2.94-.56l-.21-.08-4.98 1 1-4.77-.14-.22A9.05 9.05 0 0 1 7.02 14.7c0-5 4.1-9.07 8.98-9.07 4.96 0 8.98 4.06 8.98 9.07 0 5-4.02 9.4-8.98 9.4Z" fill="currentColor"/>\n          <path d="M12.52 11.2c-.18-.4-.37-.41-.53-.41h-.46c-.16 0-.42.06-.65.3-.23.24-.88.86-.88 2.1 0 1.24.9 2.44 1.03 2.6.12.17 1.75 2.76 4.33 3.75 2.12.82 2.56.66 3.03.62.46-.05 1.49-.6 1.7-1.2.22-.58.22-1.08.15-1.2-.07-.1-.25-.16-.53-.3-.28-.12-1.67-.82-1.93-.92-.26-.1-.45-.12-.63.13-.19.25-.73.92-.9 1.1-.16.18-.33.2-.6.08-.28-.13-1.18-.44-2.25-1.4-.82-.73-1.38-1.65-1.54-1.92-.16-.28-.02-.44.12-.58.12-.12.28-.32.43-.47.14-.16.18-.26.28-.45.1-.18.05-.34-.02-.47-.06-.13-.57-1.43-.77-1.87Z" fill="#ffffff"/>\n        </svg>\n      </span>\n      <span class="floating-whatsapp-text">WhatsApp</span>\n    ',document.body.appendChild(e)}const h=document.querySelectorAll(".btn-whatsapp");h.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();const n=e.getAttribute("data-message")||"Hola, me interesa conocer más sobre sus productos termoformados",o=`https://wa.me/5215510881676?text=${encodeURIComponent(n)}`;window.open(o,"_blank","noopener")})});const v=document.querySelectorAll(".stat-number");if(prefersReducedMotion||!("IntersectionObserver"in window))v.forEach(function(e){const t=e.getAttribute("data-target"),n=e.dataset.suffix||"";t&&(e.textContent=t+n)});else{const e=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){const n=t.target,o=parseInt(n.getAttribute("data-target")),r=o/(2e3/16);let a=0;const s=function(){a+=r,a<o?(n.textContent=Math.floor(a)+(n.dataset.suffix||""),requestAnimationFrame(s)):n.textContent=o+(n.dataset.suffix||"")};s(),e.unobserve(n)}})},{threshold:.5});v.forEach(function(t){e.observe(t)})}});const style=document.createElement("style");style.textContent="\n  @keyframes slideInRight {\n    from {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n    to {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  @keyframes slideOutRight {\n    from {\n      transform: translateX(0);\n      opacity: 1;\n    }\n    to {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n  }\n",document.head.appendChild(style);